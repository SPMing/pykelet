import numpy as np
from pylab import *

mata = """
<abstract>	1.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000
<address>	1.0000	0.9458	0.2838	1.0000	0.0000	0.0000	0.0000	0.1667	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000
<affiliation>	0.7250	0.2281	0.9503	0.5294	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000
<author>	0.9167	0.0000	0.0466	0.9889	0.0000	0.0000	0.0000	0.1667	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.2174	1.0000	0.0000
<collaboration>	0.0000	0.0000	0.0000	0.0000	0.7500	0.2500	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.2500	0.0000
<copyright>	1.0000	0.0000	0.0000	0.0000	0.0000	1.0000	0.0000	0.0000	0.0000	0.0000	1.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000
<date>	0.0000	0.0000	0.2727	0.0000	0.0000	0.0000	0.8766	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.5909	0.0000	0.0000
<email>	0.3913	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.9733	0.0000	0.0000	0.0000	0.1429	0.0000	0.0000	0.0000	0.0000	0.0000
<grant>	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	1.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000
<keyword>	1.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	1.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000
<note>	0.0781	0.1250	0.1719	0.0000	0.0000	0.3604	0.0000	0.7037	0.0000	0.0000	0.8033	0.0000	0.9444	0.5304	0.5200	0.4000	0.0000
<phone>	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	1.0000	0.0000	0.0000	0.0000	0.0000	0.0000
<pubnum>	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	1.0000	0.0000	0.0000	0.0000	0.0000
<reference>	1.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.3889	0.0000	0.0000	0.5789	0.8056	0.0000	0.0000	0.9421	0.0000	0.0000	0.0000
<submission>	0.6190	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.9702	0.0000	0.0000
<title>	0.0667	0.0000	0.0000	0.1786	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.9863	0.0000
<web>	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	1.0000	0.0000	0.0000	0.0000	0.0000
"""

matb = """
<abstract>	0.9969	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0085	0.0000	0.0000	0.0000	0.00000.0000	0.0862	0.0000
<address>	0.0000	0.9668	0.5468	0.2558	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.00000.0000	0.0000	0.0000
<affiliation>	0.1429	0.1688	0.9467	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.00000.0000	0.0000	0.0000
<author>	0.0000	0.2500	0.1370	0.9787	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.00000.0000	1.0000	0.0000
<collaboration>	0.0000	0.0000	0.3333	0.0000	0.8333	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.00000.0000	0.0000	0.0000
<copyright>	0.9314	0.0392	0.0980	0.0000	0.0000	0.7599	0.0000	0.0000	0.0000	0.0000	0.6004	0.0000	0.0000	0.00001.0000	0.0000	0.0000
<date>	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.9061	0.0000	0.0000	0.0000	0.7273	0.0000	0.0000	0.4000	0.00000.0000	0.0000
<email>	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	1.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	1.00000.0000	0.0000
<grant>	1.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	1.0000	0.0000	1.0000	0.0000	0.0000	0.0000	1.00000.0000	0.0000
<keyword>	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	1.0000	0.0000	0.0000	0.0000	0.00001.0000	0.0000	0.0000
<note>	0.7581	0.1724	0.5172	0.6552	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.7868	0.0000	0.0000	0.8780	0.00000.7097	0.0000
<phone>	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	1.0000	0.0000	0.0000	0.0000	0.00000.0000	0.0000
<pubnum>	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	1.0000	0.00000.0000	0.0000	0.0000
<reference>	0.4333	0.5556	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	1.0000	0.0000	0.0000	0.93410.0000	1.0000	0.0000
<submission>	0.0000	1.0000	0.0000	0.0000	0.0000	0.0000	1.0000	0.0000	1.0000	0.0000	0.4643	0.0000	0.0000	0.00000.9536	0.0000	0.0000
<title>	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.00001.0000	0.0000
<web>	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0000	0.0625	0.0000	0.0000	0.0000	0.00000.0000	0.9375
"""

labels = [row.split()[0].strip('<>') for row in filter(bool, mata.split('\n'))]

countsa = np.array([map(lambda x: float(x), row.split()[1:]) for row in
                    filter(bool, mata.split('\n'))])

countsb = np.array([map(lambda x: float(x), row.split()[1:]) for row in
                    filter(bool, matb.split('\n'))])

figure()
# Keep major ticks labeless
xticks(range(len(labels)), [])
yticks(range(len(labels)), [])
# Place labels on minor ticks
gca().set_xticks([x + 0.5 for x in range(len(labels))], minor=True)
gca().set_xticklabels(labels, rotation='90', fontsize=8, minor=True)
gca().set_yticks([y + 0.5 for y in range(len(labels))], minor=True)
gca().set_yticklabels(labels[::-1], fontsize=8, minor=True)
# Finally, hide minor tick marks...
gca().tick_params('both', width=0, which='minor')

counts = countsa - countsb
pcolor(array(counts[::-1]), cmap=cm.coolwarm)

for y in range(len(labels)):
    for x in range(len(labels)):
        if counts[::-1][y][x] != 0:
            text(x + 0.5, y + 0.5, counts[::-1][y][x],
                 fontsize=6,
                 horizontalalignment='center',
                 verticalalignment='center')

grid(True)
title('mata - matb')
plt.tight_layout()
savefig('comparison.pdf')
close()
